(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{39:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(30),c=n.n(l),o=(n(39),n(15)),i=n(2),u=n(4),s=n(9),f=n.n(s),p=n(11),m=n.n(p),d=n(31),j=n.n(d).a.create({baseURL:"https://storage.googleapis.com/jamie_stock/"}),b=function(e){return j.get("weighted_index/".concat(e,".json")).then((function(e){return e.data}))},h=function(e){return j.get("three_corporate_option_opi/".concat(e,".json")).then((function(e){return e.data}))},g=function(e){return j.get("three_corporate_open_interest/".concat(e,".json")).then((function(e){return e.data}))};function _(e){return(e||0).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")}var v=function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};return{title:{text:"".concat(n," ").concat(e),x:-20},subtitle:{text:"",x:-20},yAxis:{title:{text:t},plotLines:[{value:0,width:1,color:"#808080"}]},xAxis:{type:"datetime",labels:{format:"{value:%m/%d}",rotation:45,align:"left"}},rangeSelector:{selected:5},tooltip:{valueSuffix:"",useHTML:!0,formatter:function(){r(this.points[0].point.date,"".concat(n," ").concat(e));var a="<span>\u65e5\u671f\uff1a<span>".concat(this.points[0].point.date,"<br>")+"<span>".concat(t,": <span>").concat(_(this.points[0].point.y),"<br>");return!0===this.points[0].point.is_settle&&(a+='<span style="color: red">\u7d50\u7b97\u65e5<span>'),a}},legend:{layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:0},series:[{turboThreshold:0,name:e,data:a}]}},x=function(e){if(e){var t=e.series[0],n=e.xAxis[0],a=t.xData[0],r=t.xData[t.xData.length-1];n.setExtremes(a,r)}},O=n(1);var y=function(e){var t=e.year,n=Object(a.useRef)(null),r=Object(a.useState)(null),l=Object(u.a)(r,2),c=l[0],o=l[1];return Object(a.useEffect)((function(){b(t).then((function(e){var a=[];for(var r in e){var l=e[r],c={};c.y=parseInt(l.w_index),c.x=Date.parse(r),c.date=r,c.w_index=l.w_index,c.is_settle=l.is_settle,a.push(c)}o(v("\u52a0\u6b0a\u6307\u6578","\u50f9\u4f4d",t,a)),x(n.current.chart)}))}),[t]),Object(O.jsx)(m.a,{ref:n,highcharts:f.a,constructorType:"stockChart",options:c})};var V=function(e){var t=e.defaultYear,n=e.year,a=e.handler,r=Array(5).fill().map((function(e,n){return t-n})).map((function(e){return Object(O.jsx)("option",{value:e,children:e},e)}));return Object(O.jsxs)("div",{className:"year-selector",children:[Object(O.jsx)("label",{htmlFor:"year",children:"Choose a \byear:"}),Object(O.jsx)("select",{name:"year",value:n,onChange:function(e){a(e.target.value)},children:r})]})},C=n(32),S=n.n(C),N=n(34);n(59);function w(e){var t=e.itemMap,n=e.selectedChartTypes,a=e.handler,r=e.splitItem,l=void 0===r?"":r,c=function(e){var r=e.target.dataset.value,l=Object(N.a)(n);n.includes(r)?l.splice(n.indexOf(r),1):l.push(r);var c=t.map((function(e){return e.name})).filter((function(e){return l.includes(e)}));a(c)},o=t.findIndex((function(e){return e.name===l}));o=-1===o?t.length:o;var i=t.slice(0,o),u=t.slice(o,t.length),s=function(e,t){return Object(O.jsx)("span",{tabIndex:t,className:"item ".concat(n.includes(e.name)?"active":""," "),"data-value":e.name,onClick:c,onKeyDown:c,role:"button",children:e.name},e.name)},f=i.map((function(e,t){return s(e,t)})),p=u.map((function(e,t){return s(e,t)}));return Object(O.jsxs)("div",{className:"item-selector",children:[Object(O.jsx)("div",{className:"group",children:f}),Object(O.jsx)("div",{className:"group",children:p})]})}w.defaultProps={splitItem:""};var P=w;n(60);S()(f.a);var I=function(e){var t=e.year,n=[{name:"\u5916\u8cc7 Buy Call \u672a\u5e73\u5009\u91cf",targetValue:"f_buy_call"},{name:"\u5916\u8cc7 Buy Call \u672a\u5e73\u5009\u91d1\u984d",targetValue:"f_buy_call_amount"},{name:"\u5916\u8cc7 Buy Put \u672a\u5e73\u5009\u91cf",targetValue:"f_buy_put"},{name:"\u5916\u8cc7 Buy Put \u672a\u5e73\u5009\u91d1\u984d",targetValue:"f_buy_put_amount"},{name:"\u5916\u8cc7 Sell Call \u672a\u5e73\u5009\u91cf",targetValue:"f_sell_call"},{name:"\u5916\u8cc7 Sell Call \u672a\u5e73\u5009\u91d1\u984d",targetValue:"f_sell_call_amount"},{name:"\u5916\u8cc7 Sell Put \u672a\u5e73\u5009\u91cf",targetValue:"f_sell_put"},{name:"\u5916\u8cc7 Sell Put \u672a\u5e73\u5009\u91d1\u984d",targetValue:"f_sell_put_amount"},{name:"\u5916\u8cc7\u591a\u65b9\u53e3\u6578",targetValue:"f_long"},{name:"\u5916\u8cc7\u591a\u65b9\u5951\u7d04\u91d1\u984d",targetValue:"f_long_amount"},{name:"\u5916\u8cc7\u7a7a\u65b9\u53e3\u6578",targetValue:"f_short"},{name:"\u5916\u8cc7\u7a7a\u65b9\u5951\u7d04\u91d1\u984d",targetValue:"f_short_amount"},{name:"\u5916\u8cc7\u591a\u7a7a\u6de8\u984d\u53e3\u6578",targetValue:"f_net"},{name:"\u5916\u8cc7\u591a\u7a7a\u6de8\u984d\u5951\u7d04\u91d1\u984d",targetValue:"f_net_amount"},{name:"\u81ea\u71df Buy Call \u672a\u5e73\u5009\u91cf",targetValue:"self_buy_call"},{name:"\u81ea\u71df Buy Call \u672a\u5e73\u5009\u91d1\u984d",targetValue:"self_buy_call_amount"},{name:"\u81ea\u71df Buy Put \u672a\u5e73\u5009\u91cf",targetValue:"self_buy_put"},{name:"\u81ea\u71df Buy Put \u672a\u5e73\u5009\u91d1\u984d",targetValue:"self_buy_put_amount"},{name:"\u81ea\u71df Sell Call \u672a\u5e73\u5009\u91cf",targetValue:"self_sell_call"},{name:"\u81ea\u71df Sell Call \u672a\u5e73\u5009\u91d1\u984d",targetValue:"self_sell_call_amount"},{name:"\u81ea\u71df Sell Put \u672a\u5e73\u5009\u91cf",targetValue:"self_sell_put"},{name:"\u81ea\u71df Sell Put \u672a\u5e73\u5009\u91d1\u984d",targetValue:"self_sell_put_amount"},{name:"\u81ea\u71df\u591a\u65b9\u53e3\u6578",targetValue:"self_long"},{name:"\u81ea\u71df\u591a\u65b9\u5951\u7d04\u91d1\u984d",targetValue:"self_long_amount"},{name:"\u81ea\u71df\u7a7a\u65b9\u53e3\u6578",targetValue:"self_short"},{name:"\u81ea\u71df\u7a7a\u65b9\u5951\u7d04\u91d1\u984d",targetValue:"self_short_amount"},{name:"\u81ea\u71df\u591a\u7a7a\u6de8\u984d\u53e3\u6578",targetValue:"self_net"},{name:"\u81ea\u71df\u591a\u7a7a\u6de8\u984d\u5951\u7d04\u91d1\u984d",targetValue:"self_net_amount"}],r=Object(a.useState)([]),l=Object(u.a)(r,2),c=l[0],o=l[1],i=Object(a.useRef)([]),s=Object(a.useState)({}),p=Object(u.a)(s,2),d=p[0],j=p[1],b=Object(a.useState)([]),g=Object(u.a)(b,2),y=g[0],V=g[1];function C(){V([])}var S="",N=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return function(){for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];clearTimeout(t),t=setTimeout((function(){e.apply(void 0,r)}),n)}}((function(e,t){var n=i.current.filter((function(e){return e}));n.forEach((function(e){e.chart.removeAnnotation(S)})),n.forEach((function(n){var a=n.chart;if(a.options.title.text!==t){var r=a.get(e).y;a.addAnnotation({id:e,labelOptions:{y:15,verticalAlign:"bottom",distance:25},labels:[{point:e,text:"".concat(_(r))}]})}})),S=e}),100);return Object(a.useEffect)((function(){h(t).then((function(e){j(e)}))}),[t]),Object(a.useEffect)((function(){var e=y.map((function(e){return function(e){var a=n.filter((function(t){return t.name===e}))[0],r=a.name,l=a.targetValue,c=[];for(var o in d){var i=d[o],u={};u.y=parseInt(i[l]),u.x=Date.parse(o),u.date=o,u.is_settle=i.is_settle,u.id=o,c.push(u)}return v(r,"\u503c",t,c,N)}(e)}));o(e),i.current.forEach((function(e){var t;x(null===e||void 0===e||null===(t=e.current)||void 0===t?void 0:t.chart)}))}),[y,d]),Object(O.jsxs)("div",{className:"option-open-wrapper",children:[Object(O.jsxs)("div",{className:"title-wrap",children:[Object(O.jsx)("span",{className:"title",children:"\u9078\u64c7\u6b0a\u672a\u5e73\u5009"}),Object(O.jsx)("span",{className:"clear-action",onClick:C,onKeyDown:C,role:"button",tabIndex:"0",children:"\u6e05\u7a7a"})]}),Object(O.jsx)(P,{itemMap:n,handler:V,selectedChartTypes:y,splitItem:"\u81ea\u71df Buy Call \u672a\u5e73\u5009\u91cf"}),c.map((function(e,t){return Object(O.jsx)(m.a,{ref:function(e){return i.current[t]=e},highcharts:f.a,constructorType:"stockChart",options:e},e.title.text)}))]})};var k=function(){var e=(new Date).getFullYear(),t=Object(a.useState)(String(e)),n=Object(u.a)(t,2),r=n[0],l=n[1];return Object(O.jsxs)("div",{className:"option-open-interest",children:[Object(O.jsx)(V,{defaultYear:e,year:r,handler:l}),Object(O.jsx)(y,{year:r}),Object(O.jsx)(I,{year:r})]})};n(61);var A=function(e){var t=e.year,n=[{name:"\u591a\u65b9\u53e3\u6578",targetValue:["bull_foreign","bull_self"]},{name:"\u591a\u65b9\u91d1\u984d",targetValue:["bull_foreign_amount","bull_self_amount"]},{name:"\u7a7a\u65b9\u53e3\u6578",targetValue:["bear_foreign","bear_self"]},{name:"\u7a7a\u65b9\u91d1\u984d",targetValue:["bear_foreign_amount","bear_self_amount"]},{name:"\u591a\u7a7a\u6de8\u984d\u53e3\u6578",targetValue:["diff_foreign","diff_self"]},{name:"\u591a\u7a7a\u6de8\u984d\u91d1\u984d",targetValue:["diff_foreign_amount","diff_self_amount"]}],r=Object(a.useState)([]),l=Object(u.a)(r,2),c=l[0],o=l[1],i=Object(a.useRef)([]),s=Object(a.useState)({}),p=Object(u.a)(s,2),d=p[0],j=p[1],b=Object(a.useState)([]),h=Object(u.a)(b,2),v=h[0],y=h[1];function V(){y([])}return Object(a.useEffect)((function(){g(t).then((function(e){j(e)}))}),[t]),Object(a.useEffect)((function(){function e(e,t){var n=[],a=t.filter((function(t){return t.includes(e)}))[0];for(var r in d){var l=d[r],c={},o=parseInt(l[a]);"total"===e&&(o=parseInt(l[t[0]])+parseInt(l[t[1]])),c.y=o,c.x=Date.parse(r),c.date=r,c.is_settle=l.is_settle,c.id=r,n.push(c)}return n}function a(a){var r=n.filter((function(e){return e.name===a}))[0],l=r.name,c=r.targetValue,o=[{name:"\u5916\u8cc7",targetPropertyCheck:"foreign",color:"#054099"},{name:"\u81ea\u71df",targetPropertyCheck:"self",color:"#a86206"},{name:"\u7e3d\u548c",targetPropertyCheck:"total",color:"#207506"}].map((function(t){return{name:t.name,data:e(t.targetPropertyCheck,c),color:t.color}}));return function(e,t,n,a){return{title:{text:"".concat(n," ").concat(e),x:-20},subtitle:{text:"",x:-20},rangeSelector:{selected:5},yAxis:{title:{text:t},plotLines:[{value:0,width:1,color:"#808080"}]},xAxis:{type:"datetime",labels:{format:"{value:%m/%d}",rotation:45,align:"left"}},useHTML:!0,tooltip:{valueSuffix:"",formatter:function(){var e=this.points.reduce((function(e,t){return"".concat(e,'<span style="color:').concat(t.color,'">').concat(t.point.series.name,"</span>: <b>").concat(_(t.y),"</b><br>")}),""),t="<span>\u65e5\u671f\uff1a</span>".concat(this.points[0].point.date,"<br>").concat(e);return!0===this.points[0].point.is_settle&&(t+='<span style="color: red">\u7d50\u7b97\u65e5<span>'),t}},legend:{layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:0},series:a}}(l,"\u503c",t,o)}var r=v.map((function(e){return a(e)}));o(r),i.current.forEach((function(e){var t;x(null===e||void 0===e||null===(t=e.current)||void 0===t?void 0:t.chart)}))}),[v,d]),Object(O.jsxs)("div",{className:"option-open-wrapper",children:[Object(O.jsxs)("div",{className:"title-wrap",children:[Object(O.jsx)("span",{className:"title",children:"\u671f\u8ca8\u672a\u5e73\u5009"}),Object(O.jsx)("span",{className:"clear-action",onClick:V,onKeyDown:V,role:"button",tabIndex:"0",children:"\u6e05\u7a7a"})]}),Object(O.jsx)(P,{itemMap:n,handler:y,selectedChartTypes:v}),c.map((function(e,t){return Object(O.jsx)(m.a,{ref:function(e){return i.current[t]=e},highcharts:f.a,constructorType:"stockChart",options:e},e.title.text)}))]})};var T=function(){var e=(new Date).getFullYear(),t=Object(a.useState)(String(e)),n=Object(u.a)(t,2),r=n[0],l=n[1];return Object(O.jsxs)("div",{className:"futures-open-interest",children:[Object(O.jsx)(V,{defaultYear:e,year:r,handler:l}),Object(O.jsx)(y,{year:r}),Object(O.jsx)(A,{year:r})]})};n(62);var D=function(){return Object(O.jsx)("div",{className:"navigation",children:[{text:"\u9078\u64c7\u6b0a\u672a\u5e73\u5009",route:"option-open-interest"},{text:"\u671f\u8ca8\u672a\u5e73\u5009",route:"futures-open-interest"}].map((function(e){return Object(O.jsx)(o.b,{className:"nav-item",activeClassName:"selected",to:"/".concat(e.route),children:e.text},e.text)}))})};n(68);var B=function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsxs)(o.a,{children:[Object(O.jsx)(D,{}),Object(O.jsx)("div",{className:"main",children:Object(O.jsxs)(i.c,{children:[Object(O.jsx)(i.a,{path:"/option-open-interest",children:Object(O.jsx)(k,{})}),Object(O.jsx)(i.a,{path:"/futures-open-interest",children:Object(O.jsx)(T,{})}),Object(O.jsx)(i.a,{path:"/",children:Object(O.jsx)(k,{})})]})})]})})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,70)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,l=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),l(e),c(e)}))};c.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(B,{})}),document.getElementById("root")),E()}},[[69,1,2]]]);
//# sourceMappingURL=main.e070a15f.chunk.js.map