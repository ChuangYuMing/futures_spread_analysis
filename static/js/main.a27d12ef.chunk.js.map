{"version":3,"sources":["api/api.js","utils/index.js","utils/hightChartOptionsFactory.js","utils/chart.js","components/weighted-index/WeightedIndex.jsx","components/common/year-selector/YearSelector.jsx","components/common/item-selector/ItemSelector.jsx","components/option-open-interest/OptionOpenInterest.jsx","view/OptionOpenInterestVIew.jsx","components/futures-open-interest/FuturesOpenInterest.jsx","view/FuturesOpenInterestView.jsx","components/futures-big-open-interest/FuturesBigOpenInterest.jsx","view/FuturesBigOpenInterestView.jsx","components/navigation/Navigation.jsx","components/loan-and-lending-analysis/rules.js","components/loan-and-lending-analysis/RuleInput.jsx","components/loan-and-lending-analysis/LoanAndLendingAnalysis.jsx","App.jsx","reportWebVitals.js","index.jsx"],"names":["ApiInstance","axios","create","baseURL","target","get","then","data","debounce","func","timer","timeout","args","clearTimeout","setTimeout","toThousands","num","toString","replace","hightChartCommon","subject","yName","year","handleHoverDate","title","text","x","subtitle","yAxis","plotLines","value","width","color","xAxis","type","labels","format","rotation","align","rangeSelector","selected","tooltip","valueSuffix","useHTML","formatter","this","points","point","date","html","y","is_settle","legend","layout","verticalAlign","borderWidth","series","turboThreshold","name","hightChartMultiple","reduce","acc","cur","zoomToAll","chart","newStart","xData","newEnd","length","setExtremes","WeightedIndex","chartComponent","useRef","useState","options","setOptions","useEffect","Api","res","stockData","key","item","obj","parseInt","w_index","Date","parse","push","current","ref","highcharts","Highcharts","constructorType","YearSelector","defaultYear","handler","yearOptions","Array","fill","map","index","option","className","htmlFor","onChange","event","ItemSelector","itemMap","selectedChartTypes","splitItem","handleChange","dataset","newTypes","includes","splice","indexOf","sortTypes","filter","splitItemIndex","findIndex","itemGroupOne","slice","itemGroupTwo","itemFactory","tabIndex","onClick","onKeyDown","role","groupOneItems","groupTwoItems","defaultProps","AnnotationsModule","OptionOpenInterest","chartTypes","targetValue","chartOptions","setChartOptions","chartComponents","apiData","setApiData","setChartType","clearAll","keepHoverDate","debounceHandleHoverDate","chartTitle","charts","forEach","removeAnnotation","addAnnotation","id","labelOptions","distance","chartOptionFactory","component","element","OptionOpenInterestVIew","getFullYear","String","setYear","FuturesOpenInterest","seriesDataFactory","targetPropertyCheck","targetProperty","yValue","seriesType","FuturesOpenInterestView","FuturesBigOpenInterest","chartCombineOptions","setChartCombineOptions","chartCombineComponents","FuturesBigOpenInterestView","Navigation","route","activeClassName","to","getLendingByDay","resData","day","creditData","credit_data","creditLength","Object","keys","i","bw_sell_on_day","getLendingBalanceReduceByDay","byDayData","bw_return_on_day","RuleInput","ruleName","toggleRule","checked","setChecked","dayInput","setDayInput","isEnable","LoanAndLendingAnalysis","rulesMap","callBack","activeRules","setActiveRules","setCreditData","result","setResult","stockInfo","setStockInfo","selectedCode","setSelectedCode","ruleObj","newRules","targetRule","find","rule","hasEnable","newObj","getResult","formatInfoData","parseFloat","toFixed","code","rowSpan","colSpan","sl_preDay_balance","sl_sell","sl_buy","sl_cash_stock","sl_day_balance","sl_limit","bw_preDay_balance","bw_adjust_on_day","bw_day_balance","bw_limit_on_next_business_day","App","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a27d12ef.chunk.js","sourcesContent":["import axios from 'axios'\n\nconst ApiInstance = axios.create({\n  baseURL: 'https://storage.googleapis.com/jamie_stock/'\n})\n\nexport default {\n  getWeightIndex(target) {\n    return ApiInstance.get(`weighted_index/${target}.json`).then(\n      ({ data }) => data\n    )\n  },\n  getOptionOpen(target) {\n    return ApiInstance.get(`three_corporate_option_opi/${target}.json`).then(\n      ({ data }) => data\n    )\n  },\n  getFuturesOpen(target) {\n    return ApiInstance.get(`three_corporate_open_interest/${target}.json`).then(\n      ({ data }) => data\n    )\n  },\n  getFuturesBigOpen(target) {\n    return ApiInstance.get(`tx_open_interest/${target}.json`).then(\n      ({ data }) => data\n    )\n  },\n  getLoanAndLending() {\n    return ApiInstance.get(\n      `securities_loan_and_stock_lending/loan-and-lending.json`\n    ).then(({ data }) => data)\n  }\n}\n","export function debounce(func, timeout = 1000) {\n  let timer\n  return (...args) => {\n    clearTimeout(timer)\n    timer = setTimeout(() => {\n      func(...args)\n    }, timeout)\n  }\n}\n\nexport function toThousands(num) {\n  return (num || 0).toString().replace(/(\\d)(?=(?:\\d{3})+$)/g, '$1,')\n}\n","import { toThousands } from './index'\n\nexport const hightChartCommon = (\n  subject,\n  yName,\n  year,\n  data,\n  handleHoverDate = () => {}\n) => ({\n  title: {\n    text: `${year} ${subject}`,\n    x: -20 // center\n  },\n  subtitle: {\n    text: '',\n    x: -20\n  },\n  yAxis: {\n    title: {\n      text: yName\n    },\n    plotLines: [\n      {\n        value: 0,\n        width: 1,\n        color: '#808080'\n      }\n    ]\n  },\n  xAxis: {\n    type: 'datetime',\n    labels: {\n      format: '{value:%m/%d}',\n      rotation: 45,\n      align: 'left'\n    }\n  },\n  rangeSelector: {\n    selected: 5\n  },\n  tooltip: {\n    valueSuffix: '',\n    useHTML: true,\n    formatter() {\n      handleHoverDate(this.points[0].point.date, `${year} ${subject}`)\n\n      let html =\n        `<span>日期：<span>${this.points[0].point.date}<br>` +\n        `<span>${yName}: <span>${toThousands(this.points[0].point.y)}<br>`\n\n      if (this.points[0].point.is_settle === true) {\n        html += '<span style=\"color: red\">結算日<span>'\n      }\n      return html\n    }\n  },\n  legend: {\n    layout: 'vertical',\n    align: 'right',\n    verticalAlign: 'middle',\n    borderWidth: 0\n  },\n  series: [\n    {\n      turboThreshold: 0,\n      name: subject,\n      data\n    }\n  ]\n})\n\nexport const hightChartMultiple = (subject, yName, year, series) => ({\n  title: {\n    text: `${year} ${subject}`,\n    x: -20 // center\n  },\n  subtitle: {\n    text: '',\n    x: -20\n  },\n  rangeSelector: {\n    selected: 5\n  },\n  yAxis: {\n    title: {\n      text: yName\n    },\n    plotLines: [\n      {\n        value: 0,\n        width: 1,\n        color: '#808080'\n      }\n    ]\n  },\n  xAxis: {\n    type: 'datetime',\n    labels: {\n      format: '{value:%m/%d}',\n      rotation: 45,\n      align: 'left'\n    }\n  },\n  useHTML: true,\n  tooltip: {\n    valueSuffix: '',\n    formatter() {\n      const labels = this.points.reduce(\n        (acc, cur) =>\n          `${acc}<span style=\"color:${cur.color}\">${\n            cur.point.series.name\n          }</span>: <b>${toThousands(cur.y)}</b><br>`,\n        ''\n      )\n      let html = `<span>日期：</span>${this.points[0].point.date}<br>${labels}`\n\n      if (this.points[0].point.is_settle === true) {\n        html += '<span style=\"color: red\">結算日<span>'\n      }\n      return html\n    }\n  },\n  legend: {\n    layout: 'vertical',\n    align: 'right',\n    verticalAlign: 'middle',\n    borderWidth: 0\n  },\n  series\n})\n","export const zoomToAll = chart => {\n  if (!chart || !chart?.series || !chart?.series[0]) {\n    return\n  }\n  const series = chart.series[0]\n  const xAxis = chart.xAxis[0]\n  const newStart = series.xData[0]\n  const newEnd = series.xData[series.xData.length - 1]\n\n  xAxis.setExtremes(newStart, newEnd)\n}\n\nexport const temp = () => {}\n","import React, { useState, useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport Highcharts from 'highcharts/highstock'\nimport HighchartsReact from 'highcharts-react-official'\nimport Api from '../../api/api'\nimport { hightChartCommon } from '../../utils/hightChartOptionsFactory'\nimport { zoomToAll } from '../../utils/chart'\n\nfunction WeightedIndex({ year }) {\n  const chartComponent = useRef(null)\n  const [options, setOptions] = useState({})\n\n  useEffect(() => {\n    Api.getWeightIndex(year).then(res => {\n      const stockData = []\n      for (const key in res) {\n        const item = res[key]\n\n        const obj = {}\n        obj.y = parseInt(item.w_index)\n        obj.x = Date.parse(key)\n        obj.date = key\n        obj.w_index = item.w_index\n        obj.is_settle = item.is_settle\n        stockData.push(obj)\n      }\n\n      setOptions(hightChartCommon('加權指數', '價位', year, stockData))\n      zoomToAll(chartComponent?.current?.chart)\n    })\n  }, [year])\n\n  return (\n    <HighchartsReact\n      ref={chartComponent}\n      highcharts={Highcharts}\n      constructorType=\"stockChart\"\n      options={options}\n    />\n  )\n}\n\nWeightedIndex.propTypes = {\n  year: PropTypes.string.isRequired\n}\n\nexport default WeightedIndex\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nfunction YearSelector({ defaultYear, year, handler }) {\n  const yearRange = Array(5)\n    .fill()\n    .map((item, index) => defaultYear - index)\n\n  const yearOptions = yearRange.map(option => (\n    <option key={option} value={option}>\n      {option}\n    </option>\n  ))\n\n  const handleChange = event => {\n    handler(event.target.value)\n  }\n  return (\n    <div className=\"year-selector\">\n      <label htmlFor=\"year\">Choose a \byear:</label>\n      <select name=\"year\" value={year} onChange={handleChange}>\n        {yearOptions}\n      </select>\n    </div>\n  )\n}\n\nYearSelector.propTypes = {\n  year: PropTypes.string.isRequired,\n  defaultYear: PropTypes.number.isRequired,\n  handler: PropTypes.func.isRequired\n}\nexport default YearSelector\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport './style.css'\n\nfunction ItemSelector({\n  itemMap,\n  selectedChartTypes,\n  handler,\n  splitItem = ''\n}) {\n  const handleChange = event => {\n    const name = event.target.dataset.value\n    const newTypes = [...selectedChartTypes]\n    const hasSelected = selectedChartTypes.includes(name)\n\n    if (hasSelected) {\n      newTypes.splice(selectedChartTypes.indexOf(name), 1)\n    } else {\n      newTypes.push(name)\n    }\n\n    const sortTypes = itemMap\n      .map(item => item.name)\n      .filter(item => newTypes.includes(item))\n    handler(sortTypes)\n  }\n\n  let splitItemIndex = itemMap.findIndex(item => item.name === splitItem)\n  splitItemIndex = splitItemIndex === -1 ? itemMap.length : splitItemIndex\n\n  const itemGroupOne = itemMap.slice(0, splitItemIndex)\n  const itemGroupTwo = itemMap.slice(splitItemIndex, itemMap.length)\n\n  const itemFactory = (item, index) => (\n    <span\n      key={item.name}\n      tabIndex={index}\n      className={`item ${\n        selectedChartTypes.includes(item.name) ? 'active' : ''\n      } `}\n      data-value={item.name}\n      onClick={handleChange}\n      onKeyDown={handleChange}\n      role=\"button\"\n    >\n      {item.name}\n    </span>\n  )\n  const groupOneItems = itemGroupOne.map((item, index) =>\n    itemFactory(item, index)\n  )\n\n  const groupTwoItems = itemGroupTwo.map((item, index) =>\n    itemFactory(item, index)\n  )\n\n  return (\n    <div className=\"item-selector\">\n      <div className=\"group\">{groupOneItems}</div>\n      <div className=\"group\">{groupTwoItems}</div>\n    </div>\n  )\n}\n\nItemSelector.propTypes = {\n  itemMap: PropTypes.arrayOf(\n    PropTypes.shape({\n      targetValue: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n      name: PropTypes.string\n    })\n  ).isRequired,\n  selectedChartTypes: PropTypes.arrayOf(PropTypes.string).isRequired,\n  handler: PropTypes.func.isRequired,\n  splitItem: PropTypes.string\n}\n\nItemSelector.defaultProps = {\n  splitItem: ''\n}\nexport default ItemSelector\n","import React, { useState, useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport Highcharts from 'highcharts/highstock'\nimport HighchartsReact from 'highcharts-react-official'\nimport AnnotationsModule from 'highcharts/modules/annotations'\nimport Api from '../../api/api'\nimport { hightChartCommon } from '../../utils/hightChartOptionsFactory'\nimport { zoomToAll } from '../../utils/chart'\nimport { debounce, toThousands } from '../../utils/index'\nimport ItemSelector from '../common/item-selector/ItemSelector'\nimport './style.css'\n\nAnnotationsModule(Highcharts)\nfunction OptionOpenInterest({ year }) {\n  const chartTypes = [\n    {\n      name: '外資 Buy Call 未平倉量',\n      targetValue: 'f_buy_call'\n    },\n    {\n      name: '外資 Buy Call 未平倉金額',\n      targetValue: 'f_buy_call_amount'\n    },\n    {\n      name: '外資 Buy Put 未平倉量',\n      targetValue: 'f_buy_put'\n    },\n    {\n      name: '外資 Buy Put 未平倉金額',\n      targetValue: 'f_buy_put_amount'\n    },\n    {\n      name: '外資 Sell Call 未平倉量',\n      targetValue: 'f_sell_call'\n    },\n    {\n      name: '外資 Sell Call 未平倉金額',\n      targetValue: 'f_sell_call_amount'\n    },\n    {\n      name: '外資 Sell Put 未平倉量',\n      targetValue: 'f_sell_put'\n    },\n    {\n      name: '外資 Sell Put 未平倉金額',\n      targetValue: 'f_sell_put_amount'\n    },\n    {\n      name: '外資多方口數',\n      targetValue: 'f_long'\n    },\n    {\n      name: '外資多方契約金額',\n      targetValue: 'f_long_amount'\n    },\n    {\n      name: '外資空方口數',\n      targetValue: 'f_short'\n    },\n    {\n      name: '外資空方契約金額',\n      targetValue: 'f_short_amount'\n    },\n    {\n      name: '外資多空淨額口數',\n      targetValue: 'f_net'\n    },\n    {\n      name: '外資多空淨額契約金額',\n      targetValue: 'f_net_amount'\n    },\n    {\n      name: '自營 Buy Call 未平倉量',\n      targetValue: 'self_buy_call'\n    },\n    {\n      name: '自營 Buy Call 未平倉金額',\n      targetValue: 'self_buy_call_amount'\n    },\n    {\n      name: '自營 Buy Put 未平倉量',\n      targetValue: 'self_buy_put'\n    },\n    {\n      name: '自營 Buy Put 未平倉金額',\n      targetValue: 'self_buy_put_amount'\n    },\n    {\n      name: '自營 Sell Call 未平倉量',\n      targetValue: 'self_sell_call'\n    },\n    {\n      name: '自營 Sell Call 未平倉金額',\n      targetValue: 'self_sell_call_amount'\n    },\n    {\n      name: '自營 Sell Put 未平倉量',\n      targetValue: 'self_sell_put'\n    },\n    {\n      name: '自營 Sell Put 未平倉金額',\n      targetValue: 'self_sell_put_amount'\n    },\n    {\n      name: '自營多方口數',\n      targetValue: 'self_long'\n    },\n    {\n      name: '自營多方契約金額',\n      targetValue: 'self_long_amount'\n    },\n    {\n      name: '自營空方口數',\n      targetValue: 'self_short'\n    },\n    {\n      name: '自營空方契約金額',\n      targetValue: 'self_short_amount'\n    },\n    {\n      name: '自營多空淨額口數',\n      targetValue: 'self_net'\n    },\n    {\n      name: '自營多空淨額契約金額',\n      targetValue: 'self_net_amount'\n    }\n  ]\n  const [chartOptions, setChartOptions] = useState([])\n  const chartComponents = useRef([])\n  const [apiData, setApiData] = useState({})\n  const [selectedChartTypes, setChartType] = useState([])\n\n  function clearAll() {\n    setChartType([])\n  }\n\n  let keepHoverDate = ''\n  function handleHoverDate(date, chartTitle) {\n    const charts = chartComponents.current.filter(\n      chartComponent => chartComponent\n    )\n    charts.forEach(chartComponent => {\n      const { chart } = chartComponent\n      chart.removeAnnotation(keepHoverDate)\n    })\n\n    charts.forEach(chartComponent => {\n      const { chart } = chartComponent\n      if (chart.options.title.text !== chartTitle) {\n        const value = chart.get(date).y\n        chart.addAnnotation({\n          id: date,\n          labelOptions: {\n            y: 15,\n            verticalAlign: 'bottom',\n            distance: 25\n          },\n          labels: [\n            {\n              point: date,\n              text: `${toThousands(value)}`\n            }\n          ]\n        })\n      }\n    })\n\n    keepHoverDate = date\n  }\n\n  const debounceHandleHoverDate = debounce(handleHoverDate, 100)\n\n  useEffect(() => {\n    Api.getOptionOpen(year).then(res => {\n      setApiData(res)\n    })\n  }, [year])\n\n  useEffect(() => {\n    function chartOptionFactory(type) {\n      const { name, targetValue } = chartTypes.filter(\n        item => item.name === type\n      )[0]\n      const stockData = []\n\n      for (const date in apiData) {\n        const item = apiData[date]\n        const obj = {}\n        obj.y = parseInt(item[targetValue])\n        obj.x = Date.parse(date)\n        obj.date = date\n        obj.is_settle = item.is_settle\n        obj.id = date\n        stockData.push(obj)\n      }\n\n      return hightChartCommon(\n        name,\n        '值',\n        year,\n        stockData,\n        debounceHandleHoverDate\n      )\n    }\n    const options = selectedChartTypes.map(type => chartOptionFactory(type))\n\n    setChartOptions(options)\n\n    chartComponents.current.forEach(component => {\n      zoomToAll(component?.current?.chart)\n    })\n  }, [selectedChartTypes, apiData])\n\n  return (\n    <div className=\"option-open-wrapper\">\n      <div className=\"title-wrap\">\n        <span className=\"title\">選擇權未平倉</span>\n        <span\n          className=\"clear-action\"\n          onClick={clearAll}\n          onKeyDown={clearAll}\n          role=\"button\"\n          tabIndex=\"0\"\n        >\n          清空\n        </span>\n      </div>\n      <ItemSelector\n        itemMap={chartTypes}\n        handler={setChartType}\n        selectedChartTypes={selectedChartTypes}\n        splitItem=\"自營 Buy Call 未平倉量\"\n      />\n      {chartOptions.map((option, index) => (\n        <HighchartsReact\n          key={option.title.text}\n          ref={element => (chartComponents.current[index] = element)}\n          highcharts={Highcharts}\n          constructorType=\"stockChart\"\n          options={option}\n        />\n      ))}\n    </div>\n  )\n}\n\nOptionOpenInterest.propTypes = {\n  year: PropTypes.string.isRequired\n}\n\nexport default OptionOpenInterest\n","import React, { useState } from 'react'\nimport WeightedIndex from '../components/weighted-index/WeightedIndex'\nimport YearSelector from '../components/common/year-selector/YearSelector'\nimport OptionOpenInterest from '../components/option-open-interest/OptionOpenInterest'\n\nfunction OptionOpenInterestVIew() {\n  const defaultYear = new Date().getFullYear()\n  const [year, setYear] = useState(String(defaultYear))\n\n  return (\n    <div className=\"option-open-interest\">\n      <YearSelector defaultYear={defaultYear} year={year} handler={setYear} />\n      <WeightedIndex year={year} />\n      <OptionOpenInterest year={year} />\n    </div>\n  )\n}\n\nexport default OptionOpenInterestVIew\n","import React, { useState, useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport Highcharts from 'highcharts/highstock'\nimport HighchartsReact from 'highcharts-react-official'\nimport Api from '../../api/api'\nimport { hightChartMultiple } from '../../utils/hightChartOptionsFactory'\nimport { zoomToAll } from '../../utils/chart'\nimport ItemSelector from '../common/item-selector/ItemSelector'\nimport './style.css'\n\nfunction FuturesOpenInterest({ year }) {\n  const chartTypes = [\n    {\n      name: '多方口數',\n      targetValue: ['bull_foreign', 'bull_self']\n    },\n    {\n      name: '多方金額',\n      targetValue: ['bull_foreign_amount', 'bull_self_amount']\n    },\n    {\n      name: '空方口數',\n      targetValue: ['bear_foreign', 'bear_self']\n    },\n    {\n      name: '空方金額',\n      targetValue: ['bear_foreign_amount', 'bear_self_amount']\n    },\n    {\n      name: '多空淨額口數',\n      targetValue: ['diff_foreign', 'diff_self']\n    },\n    {\n      name: '多空淨額金額',\n      targetValue: ['diff_foreign_amount', 'diff_self_amount']\n    }\n  ]\n  const [chartOptions, setChartOptions] = useState([])\n  const chartComponents = useRef([])\n  const [apiData, setApiData] = useState({})\n  const [selectedChartTypes, setChartType] = useState([])\n\n  function clearAll() {\n    setChartType([])\n  }\n\n  useEffect(() => {\n    Api.getFuturesOpen(year).then(res => {\n      setApiData(res)\n    })\n  }, [year])\n\n  useEffect(() => {\n    function seriesDataFactory(targetPropertyCheck, targetValue) {\n      const stockData = []\n      const targetProperty = targetValue.filter(item =>\n        item.includes(targetPropertyCheck)\n      )[0]\n\n      for (const date in apiData) {\n        const item = apiData[date]\n        const obj = {}\n        let yValue = parseInt(item[targetProperty])\n\n        if (targetPropertyCheck === 'total') {\n          yValue =\n            parseInt(item[targetValue[0]]) + parseInt(item[targetValue[1]])\n        }\n        obj.y = yValue\n        obj.x = Date.parse(date)\n        obj.date = date\n        obj.is_settle = item.is_settle\n        obj.id = date\n        stockData.push(obj)\n      }\n\n      return stockData\n    }\n\n    function chartOptionFactory(type) {\n      const { name, targetValue } = chartTypes.filter(\n        item => item.name === type\n      )[0]\n      const seriesTypes = [\n        {\n          name: '外資',\n          targetPropertyCheck: 'foreign',\n          color: '#054099'\n        },\n        {\n          name: '自營',\n          targetPropertyCheck: 'self',\n          color: '#a86206'\n        },\n        {\n          name: '總和',\n          targetPropertyCheck: 'total',\n          color: '#207506'\n        }\n      ]\n\n      const series = seriesTypes.map(seriesType => ({\n        name: seriesType.name,\n        data: seriesDataFactory(seriesType.targetPropertyCheck, targetValue),\n        color: seriesType.color\n      }))\n\n      return hightChartMultiple(name, '值', year, series)\n    }\n    const options = selectedChartTypes.map(type => chartOptionFactory(type))\n\n    setChartOptions(options)\n\n    chartComponents.current.forEach(component => {\n      zoomToAll(component?.current?.chart)\n    })\n  }, [selectedChartTypes, apiData])\n\n  return (\n    <div className=\"option-open-wrapper\">\n      <div className=\"title-wrap\">\n        <span className=\"title\">期貨未平倉</span>\n        <span\n          className=\"clear-action\"\n          onClick={clearAll}\n          onKeyDown={clearAll}\n          role=\"button\"\n          tabIndex=\"0\"\n        >\n          清空\n        </span>\n      </div>\n      <ItemSelector\n        itemMap={chartTypes}\n        handler={setChartType}\n        selectedChartTypes={selectedChartTypes}\n      />\n      {chartOptions.map((option, index) => (\n        <HighchartsReact\n          key={option.title.text}\n          ref={element => (chartComponents.current[index] = element)}\n          highcharts={Highcharts}\n          constructorType=\"stockChart\"\n          options={option}\n        />\n      ))}\n    </div>\n  )\n}\n\nFuturesOpenInterest.propTypes = {\n  year: PropTypes.string.isRequired\n}\n\nexport default FuturesOpenInterest\n","import React, { useState } from 'react'\nimport WeightedIndex from '../components/weighted-index/WeightedIndex'\nimport YearSelector from '../components/common/year-selector/YearSelector'\nimport FuturesOpenInterest from '../components/futures-open-interest/FuturesOpenInterest'\n\nfunction FuturesOpenInterestView() {\n  const defaultYear = new Date().getFullYear()\n  const [year, setYear] = useState(String(defaultYear))\n\n  return (\n    <div className=\"futures-open-interest\">\n      <YearSelector defaultYear={defaultYear} year={year} handler={setYear} />\n      <WeightedIndex year={year} />\n      <FuturesOpenInterest year={year} />\n    </div>\n  )\n}\n\nexport default FuturesOpenInterestView\n","import React, { useState, useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport Highcharts from 'highcharts/highstock'\nimport HighchartsReact from 'highcharts-react-official'\nimport AnnotationsModule from 'highcharts/modules/annotations'\nimport Api from '../../api/api'\nimport {\n  hightChartCommon,\n  hightChartMultiple\n} from '../../utils/hightChartOptionsFactory'\nimport { zoomToAll } from '../../utils/chart'\nimport { debounce, toThousands } from '../../utils/index'\nimport ItemSelector from '../common/item-selector/ItemSelector'\nimport './style.css'\n\nAnnotationsModule(Highcharts)\nfunction FuturesBigOpenInterest({ year }) {\n  const chartTypes = [\n    {\n      name: '買方-前五大交易人',\n      targetValue: 'buy_top_five',\n      color: '#c0110b'\n    },\n    {\n      name: '買方-前十大交易人',\n      targetValue: 'buy_top_ten',\n      color: '#e75427'\n    },\n    {\n      name: '賣方-前五大交易人',\n      targetValue: 'sell_top_five',\n      color: '#0f740c'\n    },\n    {\n      name: '賣方-前十大交易人',\n      targetValue: 'sell_top_ten',\n      color: '#19c962'\n    },\n    {\n      name: '市場未平倉',\n      targetValue: 'total',\n      color: '#021f9e'\n    }\n  ]\n  const [chartOptions, setChartOptions] = useState([])\n  const [chartCombineOptions, setChartCombineOptions] = useState([])\n  const chartComponents = useRef([])\n  const chartCombineComponents = useRef({})\n  const [apiData, setApiData] = useState({})\n  const [selectedChartTypes, setChartType] = useState([])\n\n  function clearAll() {\n    setChartType([])\n  }\n\n  let keepHoverDate = ''\n  function handleHoverDate(date, chartTitle) {\n    const charts = chartComponents.current.filter(\n      chartComponent => chartComponent\n    )\n    charts.forEach(chartComponent => {\n      const { chart } = chartComponent\n      chart.removeAnnotation(keepHoverDate)\n    })\n\n    charts.forEach(chartComponent => {\n      const { chart } = chartComponent\n      if (chart.options.title.text !== chartTitle) {\n        const value = chart.get(date).y\n        chart.addAnnotation({\n          id: date,\n          labelOptions: {\n            y: 15,\n            verticalAlign: 'bottom',\n            distance: 25\n          },\n          labels: [\n            {\n              point: date,\n              text: `${toThousands(value)}`\n            }\n          ]\n        })\n      }\n    })\n\n    keepHoverDate = date\n  }\n\n  const debounceHandleHoverDate = debounce(handleHoverDate, 100)\n\n  useEffect(() => {\n    Api.getFuturesBigOpen(year).then(res => {\n      setApiData(res)\n    })\n  }, [year])\n\n  useEffect(() => {\n    function chartOptionFactory(type) {\n      const { name, targetValue } = chartTypes.filter(\n        item => item.name === type\n      )[0]\n      const stockData = []\n\n      for (const date in apiData) {\n        const item = apiData[date]\n        const obj = {}\n        obj.y = parseInt(item[targetValue])\n        obj.x = Date.parse(date)\n        obj.date = date\n        obj.is_settle = item.is_settle\n        obj.id = date\n        stockData.push(obj)\n      }\n\n      return hightChartCommon(\n        name,\n        '值',\n        year,\n        stockData,\n        debounceHandleHoverDate\n      )\n    }\n    const options = selectedChartTypes.map(type => chartOptionFactory(type))\n\n    setChartOptions(options)\n\n    chartComponents.current.forEach(component => {\n      zoomToAll(component?.current?.chart)\n    })\n  }, [selectedChartTypes, apiData])\n\n  useEffect(() => {\n    function seriesDataFactory(targetValue) {\n      const stockData = []\n\n      for (const date in apiData) {\n        const item = apiData[date]\n        const obj = {}\n\n        obj.y = parseInt(item[targetValue])\n        obj.x = Date.parse(date)\n        obj.date = date\n        obj.is_settle = item.is_settle\n        obj.id = date\n        stockData.push(obj)\n      }\n\n      return stockData\n    }\n    function chartOptionFactory() {\n      const series = chartTypes.map(seriesType => ({\n        name: seriesType.name,\n        data: seriesDataFactory(seriesType.targetValue),\n        color: seriesType.color\n      }))\n\n      return hightChartMultiple('期貨大額交易人未沖銷部位', '值', year, series)\n    }\n\n    const options = chartOptionFactory()\n\n    setChartCombineOptions(options)\n    setTimeout(() => {\n      zoomToAll(chartCombineComponents?.current?.chart)\n    }, 0)\n  }, [apiData])\n\n  return (\n    <div className=\"option-open-wrapper\">\n      <div className=\"title-wrap\">\n        <span className=\"title\">期貨大額交易人未沖銷部位</span>\n        <span\n          className=\"clear-action\"\n          onClick={clearAll}\n          onKeyDown={clearAll}\n          role=\"button\"\n          tabIndex=\"0\"\n        >\n          清空\n        </span>\n      </div>\n      <ItemSelector\n        itemMap={chartTypes}\n        handler={setChartType}\n        selectedChartTypes={selectedChartTypes}\n      />\n      <HighchartsReact\n        ref={chartCombineComponents}\n        highcharts={Highcharts}\n        constructorType=\"stockChart\"\n        options={chartCombineOptions}\n      />\n      {chartOptions.map((option, index) => (\n        <HighchartsReact\n          key={option.title.text}\n          ref={element => (chartComponents.current[index] = element)}\n          highcharts={Highcharts}\n          constructorType=\"stockChart\"\n          options={option}\n        />\n      ))}\n    </div>\n  )\n}\n\nFuturesBigOpenInterest.propTypes = {\n  year: PropTypes.string.isRequired\n}\n\nexport default FuturesBigOpenInterest\n","import React, { useState } from 'react'\nimport WeightedIndex from '../components/weighted-index/WeightedIndex'\nimport YearSelector from '../components/common/year-selector/YearSelector'\nimport FuturesBigOpenInterest from '../components/futures-big-open-interest/FuturesBigOpenInterest'\n\nfunction FuturesBigOpenInterestView() {\n  const defaultYear = new Date().getFullYear()\n  const [year, setYear] = useState(String(defaultYear))\n\n  return (\n    <div className=\"futures-big-open-interest\">\n      <YearSelector defaultYear={defaultYear} year={year} handler={setYear} />\n      <WeightedIndex year={year} />\n      <FuturesBigOpenInterest year={year} />\n    </div>\n  )\n}\n\nexport default FuturesBigOpenInterestView\n","import React from 'react'\nimport { NavLink } from 'react-router-dom'\nimport './style.css'\n\nfunction Navigation() {\n  const navMap = [\n    {\n      text: '選擇權未平倉',\n      route: 'option-open-interest'\n    },\n    {\n      text: '期貨未平倉',\n      route: 'futures-open-interest'\n    },\n    {\n      text: '期貨大額交易人未沖銷',\n      route: 'futures-big-open-interest'\n    },\n    {\n      text: '融券(借券賣出)分析',\n      route: 'loan-and-lending-analysis'\n    }\n  ]\n  return (\n    <div className=\"navigation\">\n      {navMap.map(item => (\n        <NavLink\n          key={item.text}\n          className=\"nav-item\"\n          activeClassName=\"selected\"\n          to={`/${item.route}`}\n        >\n          {item.text}\n        </NavLink>\n      ))}\n    </div>\n  )\n}\n\nexport default Navigation\n","// Ｘ天連續借券賣出\nexport const getLendingByDay = (resData, { day }) => {\n  const target = resData.filter(item => {\n    let { credit_data: creditData } = item\n    creditData = Object.keys(creditData).map(date => creditData[date])\n    const creditLength = creditData.length\n\n    if (creditLength < day) {\n      return false\n    }\n\n    for (let i = creditLength - 1; i >= creditLength - day; i -= 1) {\n      const byDayData = creditData[i]\n      if (byDayData.bw_sell_on_day === 0) {\n        return false\n      }\n    }\n    return true\n  })\n\n  return target\n}\n\n// X天借券賣出餘額減少\nexport const getLendingBalanceReduceByDay = (resData, { day }) => {\n  const target = resData.filter(item => {\n    let { credit_data: creditData } = item\n    creditData = Object.keys(creditData).map(date => creditData[date])\n    const creditLength = creditData.length\n\n    if (creditLength < day) {\n      return false\n    }\n\n    for (let i = creditLength - 1; i >= creditLength - day; i -= 1) {\n      const byDayData = creditData[i]\n      if (byDayData.bw_return_on_day - byDayData.bw_sell_on_day <= 0) {\n        return false\n      }\n    }\n    return true\n  })\n\n  return target\n}\n","import React, { useState, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport './rule-input.css'\n\nfunction RuleInput({ ruleName, toggleRule, text }) {\n  const [checked, setChecked] = useState(false)\n  const [dayInput, setDayInput] = useState('')\n\n  function handleCheck(event) {\n    const { target } = event\n    const value = target.type === 'checkbox' ? target.checked : target.value\n    setChecked(value)\n    toggleRule({ ruleName, isEnable: value, data: { day: dayInput } })\n  }\n\n  function handleDayInput(event) {\n    const { target } = event\n    const { value } = target\n\n    setDayInput(value)\n  }\n\n  useEffect(() => {\n    toggleRule({ ruleName, isEnable: checked, data: { day: dayInput } })\n  }, [dayInput])\n\n  return (\n    <div className=\"rule-input\">\n      <input\n        name={ruleName}\n        type=\"checkbox\"\n        checked={checked}\n        onChange={handleCheck}\n      />\n      <div className=\"day-wrap\">\n        <input name=\"dayInput\" type=\"text\" onChange={handleDayInput} />\n        <span>天連續</span>\n      </div>\n      <span>{text}</span>\n    </div>\n  )\n}\n\nRuleInput.propTypes = {\n  ruleName: PropTypes.string.isRequired,\n  toggleRule: PropTypes.func.isRequired,\n  text: PropTypes.string.isRequired\n}\n\nexport default RuleInput\n","import React, { useState, useEffect } from 'react'\nimport { getLendingByDay, getLendingBalanceReduceByDay } from './rules'\nimport RuleInput from './RuleInput'\nimport Api from '../../api/api'\nimport './loan.css'\n\nfunction LoanAndLendingAnalysis() {\n  const rulesMap = [\n    {\n      ruleName: 'LendingByDay',\n      text: '借券賣出',\n      callBack: getLendingByDay\n    },\n    {\n      ruleName: 'LendingBalanceReduceByDay',\n      text: '借券賣出餘額減少',\n      callBack: getLendingBalanceReduceByDay\n    }\n  ]\n\n  const [activeRules, setActiveRules] = useState([])\n  const [apiData, setApiData] = useState({})\n  const [creditData, setCreditData] = useState([])\n  const [result, setResult] = useState([])\n  const [stockInfo, setStockInfo] = useState(null)\n  const [selectedCode, setSelectedCode] = useState('')\n\n  function toggleRule(ruleObj) {\n    const { ruleName, isEnable } = ruleObj\n\n    const newRules = [...activeRules]\n\n    if (isEnable) {\n      const targetRule = rulesMap.find(rule => rule.ruleName === ruleName)\n      const index = activeRules.findIndex(rule => rule.ruleName === ruleName)\n      const hasEnable = index !== -1\n      const newObj = {\n        ...targetRule,\n        ...ruleObj\n      }\n\n      if (hasEnable) {\n        newRules[index] = newObj\n      } else {\n        newRules.push(newObj)\n      }\n    } else {\n      const index = activeRules.findIndex(rule => rule.ruleName === ruleName)\n      newRules.splice(index, 1)\n    }\n\n    setActiveRules(newRules)\n  }\n\n  function getResult() {\n    const res = activeRules.reduce(\n      (acc, cur) => cur.callBack(acc, cur.data),\n      creditData\n    )\n\n    setResult(res)\n    setStockInfo(null)\n    setSelectedCode('')\n  }\n\n  function formatInfoData(value) {\n    return +parseFloat(value / 1000).toFixed(0)\n  }\n\n  useEffect(() => {\n    setStockInfo(apiData[selectedCode])\n  }, [selectedCode])\n\n  useEffect(() => {\n    Api.getLoanAndLending().then(res => {\n      const data = Object.keys(res).map(item => res[item])\n      setApiData(res)\n      setCreditData(data)\n    })\n  }, [])\n\n  return (\n    <div className=\"analysis-wrap\">\n      <div className=\"rules-wrap\">\n        <div className=\"rules\">\n          {rulesMap.map(rule => (\n            <RuleInput\n              key={rule.ruleName}\n              ruleName={rule.ruleName}\n              text={rule.text}\n              toggleRule={toggleRule}\n            />\n          ))}\n        </div>\n        <span\n          className=\"action-btn\"\n          role=\"button\"\n          tabIndex=\"0\"\n          onClick={getResult}\n          onKeyDown={getResult}\n        >\n          取得結果\n        </span>\n      </div>\n      <div className={`res-wrap ${result.length ? '' : 'hidden'}`}>\n        {result.map(item => (\n          <span\n            key={item.code}\n            className={selectedCode === item.code ? 'active' : ''}\n            role=\"button\"\n            tabIndex=\"0\"\n            onClick={() => setSelectedCode(item.code)}\n            onKeyDown={() => setSelectedCode(item.code)}\n          >\n            {item.code} {item.name}\n          </span>\n        ))}\n      </div>\n      <div className={`stock-info\" ${stockInfo ? '' : 'hidden'}`}>\n        <table className=\"info-table\">\n          <thead>\n            <tr role=\"row\">\n              <th rowSpan=\"2\">\n                {stockInfo?.code} {stockInfo?.name}\n              </th>\n              <th colSpan=\"6\">融券</th>\n              <th colSpan=\"6\">借券賣出</th>\n            </tr>\n            <tr role=\"row\">\n              <th>前日餘額</th>\n              <th>賣出</th>\n              <th>買進</th>\n              <th>現券</th>\n              <th>今日餘額</th>\n              <th>限額</th>\n              <th>前日餘額</th>\n              <th>當日賣出</th>\n              <th>當日還券</th>\n              <th>當日調整</th>\n              <th>當日餘額</th>\n              <th>次一營業日可限額</th>\n            </tr>\n          </thead>\n          <tbody>\n            {Object.keys(stockInfo?.credit_data || {}).map(date => {\n              const data = stockInfo.credit_data[date]\n              return (\n                <tr key={date}>\n                  <td>{date}</td>\n                  <td>{formatInfoData(data.sl_preDay_balance)}</td>\n                  <td>{formatInfoData(data.sl_sell)}</td>\n                  <td>{formatInfoData(data.sl_buy)}</td>\n                  <td>{formatInfoData(data.sl_cash_stock)}</td>\n                  <td>{formatInfoData(data.sl_day_balance)}</td>\n                  <td>{formatInfoData(data.sl_limit)}</td>\n                  <td>{formatInfoData(data.bw_preDay_balance)}</td>\n                  <td>{formatInfoData(data.bw_sell_on_day)}</td>\n                  <td>{formatInfoData(data.bw_return_on_day)}</td>\n                  <td>{formatInfoData(data.bw_adjust_on_day)}</td>\n                  <td>{formatInfoData(data.bw_day_balance)}</td>\n                  <td>{formatInfoData(data.bw_limit_on_next_business_day)}</td>\n                </tr>\n              )\n            })}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  )\n}\n\nexport default LoanAndLendingAnalysis\n","import React from 'react'\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\nimport OptionOpenInterestVIew from './view/OptionOpenInterestVIew'\nimport FuturesOpenInterestView from './view/FuturesOpenInterestView'\nimport FuturesBigOpenInterestView from './view/FuturesBigOpenInterestView'\nimport Navigation from './components/navigation/Navigation'\nimport LoanAndLendingAnalysis from './components/loan-and-lending-analysis/LoanAndLendingAnalysis'\n\nimport './App.css'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Router>\n        <Navigation />\n        <div className=\"main\">\n          <Switch>\n            <Route path=\"/option-open-interest\">\n              <OptionOpenInterestVIew />\n            </Route>\n            <Route path=\"/futures-open-interest\">\n              <FuturesOpenInterestView />\n            </Route>\n            <Route path=\"/futures-big-open-interest\">\n              <FuturesBigOpenInterestView />\n            </Route>\n            <Route path=\"/loan-and-lending-analysis\">\n              <LoanAndLendingAnalysis />\n            </Route>\n            <Route path=\"/\">\n              <OptionOpenInterestVIew />\n            </Route>\n          </Switch>\n        </div>\n      </Router>\n    </div>\n  )\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}